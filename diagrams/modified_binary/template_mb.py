#!/usr/bin/env python
#coding=utf8

"""
    V are of type (2, 1)
"""

U_tmpl = """ 
     "U_%(U)s":[("I_%(I1)s", 2), ("I_%(I2)s", 2), ("V_%(V1)s", 2), ("V_%(V2)s",1)], 
    "Up_%(U)s":[("Vp_%(V1)s", 3), ("Vp_%(V2)s",2), ("I_%(I1)s", 1), ("I_%(I2)s", 1)], 
    "I_%(I1)s":[("Up_%(U)s", 3), ("U_%(U)s", 1)],
    "I_%(I2)s":[("Up_%(U)s", 4), ("U_%(U)s", 2)], 
"""

V_tmpl = """
     "V_%(V)s":[("U_%(U1)s", 4), ("I_%(I)s", 2), ("U_%(U2)s", 3), ("O_%(O)s", 2)],
    "Vp_%(V)s":[("O_%(O)s", 1),("Up_%(U1)s",2), ("I_%(I)s", 1), ("Up_%(U2)s",1)],
    "I_%(I)s":[("Vp_%(V)s", 3), ("V_%(V)s", 2)],
    "O_%(O)s":[("Vp_%(V)s", 1), ("V_%(V)s",4)], 
"""



UV_tmpl = """ 
    "U_%(U)s":  [("I_%(I1)s", 2), ("I_%(I2)s", 2), ("V_%(V1)s", 2), ("V_%(V2)s",1)], 
    "Up_%(U)s": [("Vp_%(V1)s", 3), ("Vp_%(V2)s",2), ("I_%(I1)s", 1), ("I_%(I2)s", 1)], 
    "V_%(V1)s" :[("I_%(I0)s", 2),    ("U_%(U)s", 3),     ("O_%(O1)s", 2)], 
    "V_%(V2)s" :[("U_%(U)s", 4),    ("I_%(I3)s", 2),    ("O_%(O2)s", 2)], 
    "Vp_%(V1)s":[("O_%(O1)s", 1),   ("I_%(I0)s", 1),    ("Up_%(U)s", 1)], 
    "Vp_%(V2)s":[("O_%(O2)s", 1),   ("Up_%(U)s", 2),    ("I_%(I3)s", 1)], 
    
    "O_%(O1)s": [("Vp_%(V1)s", 1),  ("V_%(V1)s", 3)], 
    "O_%(O2)s": [("Vp_%(V2)s", 1),  ("V_%(V2)s", 3)], 
    "I_%(I0)s": [("Vp_%(V1)s", 2),  ("V_%(V1)s", 1)], 
    "I_%(I1)s": [("Up_%(U)s", 3), ("U_%(U)s", 1)],
    "I_%(I2)s": [("Up_%(U)s", 4), ("U_%(U)s", 2)], 
    "I_%(I3)s": [("Vp_%(V2)s", 3),  ("V_%(V2)s", 2)], 
"""


ooN_tmpl = """{
    "%(name)s_%(1)s_%(2)s":[("I_%(1)s",1), ("I_%(2)s", 1), ("I_%(1)s", 2), ("I_%(2)s", 2)],
    "I_%(1)s":[("%(name)s_%(1)s_%(2)s", 1), ("%(name)s_%(1)s_%(2)s", 3)],
    "I_%(2)s":[("%(name)s_%(1)s_%(2)s", 2), ("%(name)s_%(1)s_%(2)s", 4)]
}    
"""

#two site op.
oo2_tmpl =  """{
    "oo_%(1)s_%(2)s":[("I_%(1)s",1), ("I_%(2)s", 1), ("I_%(1)s", 2), ("I_%(2)s", 2)],
    "I_%(1)s":[("oo_%(1)s_%(2)s", 1), ("oo_%(1)s_%(2)s", 3)],
    "I_%(2)s":[("oo_%(1)s_%(2)s", 2), ("oo_%(1)s_%(2)s", 4)]
    }
"""


#two site op.
oo2_tmpl =  """{
    "oo_%(1)s_%(2)s":[("I_%(1)s",1), ("I_%(2)s", 1), ("I_%(1)s", 2), ("I_%(2)s", 2)],
    "I_%(1)s":[("oo_%(1)s_%(2)s", 1), ("oo_%(1)s_%(2)s", 3)],
    "I_%(2)s":[("oo_%(1)s_%(2)s", 2), ("oo_%(1)s_%(2)s", 4)]
    }
"""

#3 site op.
oo3_tmpl =  """{
    "ooo_%(1)s_%(2)s_%(3)s":[("I_%(1)s",1), ("I_%(2)s", 1), ("I_%(3)s", 1), ("I_%(1)s", 2), ("I_%(2)s", 2), ("I_%(3)s", 2)],
    "I_%(1)s":[("ooo_%(1)s_%(2)s_%(3)s", 1), ("ooo_%(1)s_%(2)s_%(3)s", 4)],
    "I_%(2)s":[("ooo_%(1)s_%(2)s_%(3)s", 2), ("ooo_%(1)s_%(2)s_%(3)s", 5)],
    "I_%(3)s":[("ooo_%(1)s_%(2)s_%(3)s", 3), ("ooo_%(1)s_%(2)s_%(3)s", 6)]
    }
"""

# where is this defined from?
G_3_top = {
    "V_0":[("U_1", 4), ("I_1", 2), ("U_0", 3), ("O_1", 2)],
    "V_1":[("U_0", 4), ("I_4", 2), ("U_1", 3), ("O_2", 2)],
    "U_0":[("I_2", 2), ("I_3", 2), ("V_0", 3), ("V_1", 1)],
    "U_1":[("I_5", 2), ("I_0", 2), ("V_1", 3), ("V_0", 1)],
    
    "Vp_0":[("O_1", 1), ("Up_1", 2), ("I_1", 1), ("Up_0", 1)],
    "Vp_1":[("O_2", 1), ("Up_0", 2), ("I_4", 1), ("Up_1", 1)],
    "Up_0":[("Vp_0", 4), ("Vp_1", 2), ("I_2", 1), ("I_3", 1)],
    "Up_1":[("Vp_1", 4), ("Vp_0", 2), ("I_5", 1), ("I_0", 1)],
    
    "I_0":[("Up_1", 4), ("U_1", 2)],
    "I_1":[("Vp_0", 3), ("V_0", 2)],
    "I_2":[("Up_0", 3), ("U_0", 1)],
    "I_3":[("Up_0", 4), ("U_0", 2)],
    "I_4":[("Vp_1", 3), ("V_1", 2)],
    "I_5":[("Up_1", 3), ("U_1", 1)],
    
    "O_1":[("Vp_0", 1), ("V_0", 4)],
    "O_2":[("Vp_1", 1), ("V_1", 4)]
    }


G_mb = { 
    "U_0":  [("I_1", 2), ("I_2", 2), ("V_0", 2), ("V_1",1)], 
    "Up_0": [("Vp_0", 3), ("Vp_1",2), ("I_1", 1), ("I_2", 1)], 
    "V_0" :[("I_0", 2),    ("U_0", 3),     ("O_0", 2)], 
    "V_1" :[("U_0", 4),    ("I_3", 2),    ("O_1", 2)], 
    "Vp_0":[("O_0", 1),   ("I_0", 1),    ("Up_0", 1)], 
    "Vp_1":[("O_1", 1),   ("Up_0", 2),    ("I_3", 1)], 
    
    "O_0": [("Vp_0", 1),  ("V_0", 3)], 
    "O_1": [("Vp_1", 1),  ("V_1", 3)], 
    "I_0": [("Vp_0", 2),  ("V_0", 1)], 
    "I_1": [("Up_0", 3), ("U_0", 1)],
    "I_2": [("Up_0", 4), ("U_0", 2)], 
    "I_3": [("Vp_1", 3),  ("V_1", 2)], 
 
    "U_2":  [("I_5", 2), ("I_6", 2), ("V_2", 2), ("V_3",1)], 
    "Up_2": [("Vp_2", 3), ("Vp_3",2), ("I_5", 1), ("I_6", 1)], 
    "V_2" :[("I_4", 2),    ("U_2", 3),     ("O_2", 2)], 
    "V_3" :[("U_2", 4),    ("I_7", 2),    ("O_3", 2)], 
    "Vp_2":[("O_2", 1),   ("I_4", 1),    ("Up_2", 1)], 
    "Vp_3":[("O_3", 1),   ("Up_2", 2),    ("I_7", 1)], 
    
    "O_2": [("Vp_2", 1),  ("V_2", 3)], 
    "O_3": [("Vp_3", 1),  ("V_3", 3)], 
    "I_4": [("Vp_2", 2),  ("V_2", 1)], 
    "I_5": [("Up_2", 3), ("U_2", 1)],
    "I_6": [("Up_2", 4), ("U_2", 2)], 
    "I_7": [("Vp_3", 3),  ("V_3", 2)], 
}

def make_template():
    res= "{"
    k = 4
    for i in xrange(0, k, 2):
        j=i*2
        #算子的相对位置
        #D={"I":i, "O":i, "V":i, "U":i, "V1":i-1, "V2":i, "I1":j-1, "I2":j}
        D={"I0":j, "I1":j + 1, "I2":j + 2, "I3":j + 3, 
            "V1":i, "V2":i + 1, 
            "U":i,
            "O1":i, "O2":i + 1}
        #print U_tmpl % D
        res +=  UV_tmpl % D
    res+= "}" 
    return res

if __name__ == "__main__":
    from merapy.diagrams.diagram import compare_template
    g = make_template()
    #g = eval(g)
    print g
    #compare_template(G3, g)



